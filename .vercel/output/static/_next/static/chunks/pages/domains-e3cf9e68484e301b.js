(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[567],{7338:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/domains",function(){return n(4048)}])},6561:function(e,t,n){"use strict";var s=n(5893),o=(n(7294),n(1015)),a=n(3251);t.Z=function(e){var t=e.children,n=e.width,i=void 0===n?"1/2":n,r=e.closeModal,l=e.title,c=e.verticalCenter,d=void 0!==c&&c;(0,a.Z)("Escape",r);return(0,s.jsx)("div",{className:"modal fixed top-0 left-0 bg-white/[.7] w-full h-screen z-50",onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),e.target===e.currentTarget&&r()},children:(0,s.jsxs)("div",{className:"modal__content max-w-[340px] absolute left-0 right-0 ml-auto mr-auto w-".concat(i," \n         lg:max-w-md bg-white shadow-md rounded-md p-5 border-t-[1px] border-gray-100 text-base \n         ").concat(d?" top-1/2 translate-y-[-50%]":"top-1/4"),children:[l&&(0,s.jsx)("h3",{className:" font-semibold mb-3",children:l}),(0,s.jsx)("button",{className:"modal-close absolute right-2 top-2 p-2 cursor-pointer text-gray-400 transition-all hover:text-gray-700 hover:rotate-90",onClick:function(){return r()},children:(0,s.jsx)(o.Z,{type:"close",size:18})}),(0,s.jsx)("div",{children:t})]})})}},602:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var s=n(5893),o=n(7294),a=n(6561),i=n(6733),r=function(e){var t=e.closeModal,n=e.domains,r=void 0===n?[]:n,l=(0,o.useState)(""),c=l[0],d=l[1],u=(0,o.useState)(""),m=u[0],x=u[1],h=(0,i.cT)((function(){return t()})),p=h.mutate,f=h.isLoading,v=function(){x("");var e=r.map((function(e){return e.domain})),t=c.split("\n"),n=[],s=[];t.forEach((function(t){var o=t.trim();if(function(e){var t;try{t=new URL(e)}catch(n){return!1}return"http:"===t.protocol||"https:"===t.protocol}(o)){var a=new URL(o),i="/"===a.pathname;if(i&&!e.includes(a.host)&&n.push(a.host),!i&&!e.includes(a.href)){var r=a.href.replace("https://","").replace("http://","").replace(/^\/+|\/+$/g,"");n.push(r)}}else s.push(o)})),s.length>0?x("Please Insert Valid Domain URL. Invalid URLs: ".concat(s.join(", "))):n.length>0&&(console.log("domainsTobeAdded :",n),p(n))};return(0,s.jsx)(a.Z,{closeModal:function(){t(!1)},title:"Add New Domain",children:(0,s.jsxs)("div",{"data-testid":"adddomain_modal",children:[(0,s.jsx)("h4",{className:"text-sm mt-4",children:"Domain URL"}),(0,s.jsx)("textarea",{className:"w-full h-40 border rounded border-gray-200 p-4 outline-none\n                focus:border-indigo-300 ".concat(m?" border-red-400 focus:border-red-400":""),placeholder:"Type or Paste URLs here. Insert Each URL in a New line.",value:c,autoFocus:!0,onChange:function(e){""===e.currentTarget.value&&m&&x(""),d(e.currentTarget.value)}}),m&&(0,s.jsx)("div",{children:(0,s.jsx)("span",{className:" ml-2 block float-right text-red-500 text-xs font-semibold",children:m})}),(0,s.jsxs)("div",{className:"mt-6 text-right text-sm font-semibold",children:[(0,s.jsx)("button",{className:"py-2 px-5 rounded cursor-pointer bg-indigo-50 text-slate-500 mr-3",onClick:function(){return t(!1)},children:"Cancel"}),(0,s.jsx)("button",{className:"py-2 px-5 rounded cursor-pointer bg-blue-700 text-white",onClick:function(){return!f&&v()},children:f?"Adding....":"Add Domain"})]})]})})}},4048:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var s=n(7568),o=n(4924),a=n(6042),i=n(9396),r=n(7582),l=n(5893),c=n(7294),d=n(9008),u=n.n(d),m=n(1163),x=n(1365),h=n(6501),p=n(9401),f=n(602),v=n(2),g=n(9870),b=n(6733),j=n(6402),N=n(7484),y=n.n(N),w=n(1664),_=n.n(w),k=n(1015),Z=function(e){var t=e.domain,n=(e.selected,e.isConsoleIntegrated),s=void 0!==n&&n,o=e.thumb,a=e.updateThumb,i=t.keywordsUpdated,r=t.slug,c=t.keywordCount,d=void 0===c?0:c,u=t.avgPosition,m=void 0===u?0:u,x=t.scVisits,h=void 0===x?0:x,p=t.scImpressions,f=void 0===p?0:p,v=t.scPosition,g=void 0===v?0:v;return(0,l.jsx)("div",{className:"domItem bg-white border rounded w-full text-sm mb-10 hover:border-indigo-200 ".concat(""),children:(0,l.jsx)(_(),{href:"/domain/".concat(r),passHref:!0,children:(0,l.jsxs)("a",{className:"flex flex-col lg:flex-row",children:[(0,l.jsxs)("div",{className:"flex-1 p-6 flex ".concat(s?"":"basis-1/3"),children:[(0,l.jsxs)("div",{className:"group domain_thumb w-20 h-20 mr-6 bg-slate-100 rounded border border-gray-200 overflow-hidden flex justify-center relative",children:[(0,l.jsx)("button",{className:" absolute right-1 top-0 text-gray-400 p-1 transition-all invisible opacity-0 group-hover:visible group-hover:opacity-100 hover:text-gray-600 z-10",title:"Reload Website Screenshot",onClick:function(e){e.preventDefault(),e.stopPropagation(),a(t.domain)},children:(0,l.jsx)(k.Z,{type:"reload",size:12})}),(0,l.jsx)("img",{className:"self-center ".concat(o?"":"max-w-[50px]"),src:o||"https://www.google.com/s2/favicons?domain=".concat(t.domain,"&sz=128"),alt:t.domain})]}),(0,l.jsxs)("div",{className:"domain_details flex-1",children:[(0,l.jsx)("h3",{className:"font-semibold text-base mb-2 max-w-[200px] text-ellipsis overflow-hidden",title:t.domain,children:t.domain}),i&&(0,l.jsxs)("span",{className:" text-gray-600 text-xs",children:["Updated ",(0,l.jsx)(j.Z,{title:y()(i).format("DD-MMM-YYYY, hh:mm:ss A"),date:i})]})]})]}),(0,l.jsxs)("div",{className:"flex-1 flex flex-col p-4",children:[(0,l.jsxs)("div",{className:" bg-indigo-50 p-1 px-2 text-xs rounded-full absolute ml-3 mt-[-8px]",children:[(0,l.jsx)(k.Z,{type:"tracking",size:13,color:"#364aff"})," Tracker"]}),(0,l.jsxs)("div",{className:"dom_stats flex flex-1 font-semibold text-2xl p-4 pt-5 rounded border border-[#E9EBFF] text-center",children:[(0,l.jsxs)("div",{className:"flex-1 relative",children:[(0,l.jsx)("span",{className:"block text-xs lg:text-sm text-gray-500 mb-1",children:"Keywords"}),d]}),(0,l.jsxs)("div",{className:"flex-1 relative",children:[(0,l.jsx)("span",{className:"block text-xs lg:text-sm text-gray-500 mb-1",children:"Avg position"}),m]})]})]}),s&&(0,l.jsxs)("div",{className:"flex-1 flex-col p-4 lg:basis-56",children:[(0,l.jsxs)("div",{className:" bg-indigo-50 p-1 px-2 text-xs rounded-full absolute ml-3 mt-[-8px]",children:[(0,l.jsx)(k.Z,{type:"google",size:13})," Search Console (7d)"]}),(0,l.jsxs)("div",{className:"dom_sc_stats flex flex-1 h-full font-semibold text-2xl p-4 pt-5 rounded border border-[#E9EBFF] text-center",children:[(0,l.jsxs)("div",{className:"flex-1 relative",children:[(0,l.jsx)("span",{className:"block text-xs lg:text-sm text-gray-500 mb-1",children:"Visits"}),new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(h).replace("T","K")]}),(0,l.jsxs)("div",{className:"flex-1 relative",children:[(0,l.jsx)("span",{className:"block text-xs lg:text-sm text-gray-500 mb-1",children:"Impressions"}),new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(f).replace("T","K")]}),(0,l.jsxs)("div",{className:"flex-1 relative",children:[(0,l.jsx)("span",{className:"block text-xs lg:text-sm text-gray-500 mb-1",children:"Avg position"}),g]})]})]})]})})})},D=n(1602),E=function(){var e,t=(0,m.useRouter)(),n=(0,c.useState)(!1),d=n[0],j=n[1],N=(0,c.useState)(!1),y=N[0],w=N[1],_=(0,c.useState)({}),E=_[0],S=_[1],C=(0,g.pX)(),I=C.data,T=C.isLoading,U=(0,b.fW)(t,!0),P=U.data,A=U.isLoading,L=(0,g.uc)().data,M=(null===I||void 0===I?void 0:I.settings)||{},F=M.scraper_type,R=void 0===F?"":F,O=(0,c.useMemo)((function(){var e=0;return(null===P||void 0===P?void 0:P.domains)&&P.domains.forEach(function(){var t=(0,s.Z)((function(t){return(0,r.__generator)(this,(function(n){return e+=(null===t||void 0===t?void 0:t.keywordCount)||0,[2]}))}));return function(e){return t.apply(this,arguments)}}()),e}),[P]),z=(0,c.useMemo)((function(){var e={};return(null===P||void 0===P?void 0:P.domains)&&P.domains.forEach(function(){var t=(0,s.Z)((function(t){var n;return(0,r.__generator)(this,(function(s){return n=(null===t||void 0===t?void 0:t.search_console)?JSON.parse(t.search_console):{},e[t.ID]=n.client_email&&n.private_key,[2]}))}));return function(e){return t.apply(this,arguments)}}()),e}),[P]);(0,c.useEffect)((function(){(null===P||void 0===P?void 0:P.domains)&&P.domains.length>0&&M.screenshot_key&&P.domains.forEach(function(){var e=(0,s.Z)((function(e){var t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return e.domain?[4,(0,b.XD)(e.domain,M.screenshot_key||"")]:[3,2];case 1:(t=n.sent())&&S((function(n){return(0,i.Z)((0,a.Z)({},n),(0,o.Z)({},e.domain,t))})),n.label=2;case 2:return[2]}}))}));return function(t){return e.apply(this,arguments)}}())}),[P,M.screenshot_key]);var Y=function(){var e=(0,s.Z)((function(e){var t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return e&&M.screenshot_key?[4,(0,b.XD)(e,M.screenshot_key,!0)]:[3,2];case 1:(t=n.sent())?((0,h.ZP)("".concat(e," Screenshot Updated Successfully!"),{icon:"\u2714\ufe0f"}),S((function(n){return(0,i.Z)((0,a.Z)({},n),(0,o.Z)({},e,t))}))):(0,h.ZP)("Failed to Fetch ".concat(e," Screenshot!"),{icon:"\u26a0\ufe0f"}),n.label=2;case 2:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,l.jsxs)("div",{"data-testid":"domains",className:"Domain flex flex-col min-h-screen",children:[(!R||"none"===R)&&!T&&(0,l.jsx)("div",{className:" p-3 bg-red-600 text-white text-sm text-center",children:"A Scrapper/Proxy has not been set up Yet. Open Settings to set it up and start using the app."}),(null===L||void 0===L?void 0:L.hasMigrations)&&(0,l.jsxs)("div",{className:" p-3 bg-black text-white text-sm text-center",children:["You need to Update your database. Stop ZeniBot and run this command to update your database:",(0,l.jsx)("code",{className:" bg-gray-700 px-2 py-0 ml-1",children:"npm run db:migrate"})]}),(0,l.jsx)(u(),{children:(0,l.jsx)("title",{children:"Domains - ZeniBot"})}),(0,l.jsx)(p.Z,{showSettings:function(){return j(!0)},showAddModal:function(){return w(!0)}}),(0,l.jsxs)("div",{className:"flex flex-col w-full max-w-5xl mx-auto p-6 lg:mt-24 lg:p-0",children:[(0,l.jsxs)("div",{className:"flex justify-between mb-2 items-center",children:[(0,l.jsxs)("div",{className:" text-sm text-gray-600",children:[(null===P||void 0===P||null===(e=P.domains)||void 0===e?void 0:e.length)||0," Domains ",(0,l.jsx)("span",{className:" text-gray-300 ml-1 mr-1",children:"|"})," ",O," keywords"]}),(0,l.jsx)("div",{children:(0,l.jsxs)("button",{"data-testid":"addDomainButton",className:"ml-2 inline-block py-2 text-blue-700 font-bold text-sm",onClick:function(){return w(!0)},children:[(0,l.jsx)("span",{className:"text-center leading-4 mr-2 inline-block rounded-full w-7 h-7 pt-1 bg-blue-700 text-white font-bold text-lg",children:"+"}),(0,l.jsx)("i",{className:" not-italic hidden lg:inline-block",children:"Add Domain"})]})})]}),(0,l.jsxs)("div",{className:"flex w-full flex-col mb-8",children:[(null===P||void 0===P?void 0:P.domains)&&P.domains.map((function(e){return(0,l.jsx)(Z,{domain:e,selected:!1,isConsoleIntegrated:!(!M||!M.search_console_integrated)||!!z[e.ID],thumb:E[e.domain],updateThumb:Y},e.ID)})),A&&(0,l.jsxs)("div",{className:"noDomains mt-4 p-5 py-12 rounded border text-center bg-white text-sm",children:[(0,l.jsx)(k.Z,{type:"loading"})," Loading Domains..."]}),!A&&P&&P.domains&&0===P.domains.length&&(0,l.jsx)("div",{className:"noDomains mt-4 p-5 py-12 rounded border text-center bg-white text-sm",children:"No Domains Found. Add a Domain to get started!"})]})]}),(0,l.jsx)(x.Z,{in:y,timeout:300,classNames:"modal_anim",unmountOnExit:!0,mountOnEnter:!0,children:(0,l.jsx)(f.Z,{closeModal:function(){return w(!1)},domains:(null===P||void 0===P?void 0:P.domains)||[]})}),(0,l.jsx)(x.Z,{in:d,timeout:300,classNames:"settings_anim",unmountOnExit:!0,mountOnEnter:!0,children:(0,l.jsx)(v.Z,{closeSettings:function(){return j(!1)}})}),(0,l.jsx)(D.Z,{currentVersion:(null===M||void 0===M?void 0:M.version)?M.version:""}),(0,l.jsx)(h.x7,{position:"bottom-center",containerClassName:"react_toaster"})]})}}},function(e){e.O(0,[358,15,971,774,888,179],(function(){return t=7338,e(e.s=t);var t}));var t=e.O();_N_E=t}]);